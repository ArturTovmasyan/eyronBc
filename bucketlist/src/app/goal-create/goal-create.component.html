<!--{% extends "AppBundle::layout.html.twig" %}-->

<!--{% block angularApp %} <html ngApp="goal" data-ng-controller="goalAdd"> {% endblock %}-->

<!--{% block content %}-->
<!--{{ parent() }}-->

<!--{% if goalId is defined and goalId %}-->
<div class="form-modal"  style="width: auto;display: none;position: absolute;z-index: 2000;">
  <!--data-ng-controller="goalEnd"-->
  <!--{{ render(controller("AppBundle:Goal:manage", {id: goalId})) }}-->
</div>
<!--{% endif %}-->

<form method="post" id="goal-create-form" class="main-form" action="#" enctype="multipart/form-data" >
  <!--data-ng-init="redirectPath='{{ path('user_profile') }}'"-->
  <div class="content-top">
    <div class="container">
      <div class="row">
        <div class="col-md-6">

          <div class="row">
            <div class="col-xs-1 suggest-input">
              <!--<input id="{{ form.status.vars.id }}" name="{{ form.status.vars.full_name}}" type="checkbox" value="1" >-->
              <!--{% if form.status.vars.data == 1 %} checked {% endif %}-->
            </div>

            <div class="col-xs-11">
              <h3 class="text-purple">
                {{ 'goal.public'|translate }}
              </h3>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-10 col-sm-offset-1">
              <p class="text-gray">{{ 'goal.agree'|translate }}</p>
            </div>
          </div>

        </div>

        <div class="col-md-6 text-right">
          <div class="buttons">

            <button type="submit" [disabled]="disablePreview" class="btn btn-transparent goal-view-submit" name="btn_preview">
              <span>{{ 'goal.preview'|translate }}</span>
            </button>

            <!--{% if not isPrivate %}-->

            <button type="submit" class="btn btn-transparent draft-save-submit" name="btn_save_draft">
              <span></span>
              <!--{% if id %}{{ 'draft.update'|translate }}{% else %}{{ 'draft.create'|translate }}{% endif %}-->
            </button>

            <!--{% endif %}-->

            <button type="submit"
                    class="btn btn-purple goal-create-submit"
                    name="btn_publish">
                    <!--data-ls-jquery-modal-->
                    <!--data-ls-identity="goalSave"-->
                    <!--data-ls-template="[[ ::goalSubmitTemplate ]]"-->

              <!--{% if id and isPrivate%}{{ 'goal.edit'|translate }}{% else %}{{ 'goal.publish'|translate }}{% endif %}-->
              <i class="icon-arrow-right"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <div class="goals" >
          <!--data-ng-init="showIdeas = true"-->
          <!--{{ form_errors(form) }}-->

          <div class="row bg-white">
            <div class="col-xs-10 col-xs-offset-1">
              <div class="form-group">
                <input type="text" name="title" required="required" maxlength="64" pattern=".{3,}"
                       class="form-control" placeholder="Title" autocomplete="off"
                       [(ngModel)]="title"
                       (ngModelChange)="getGoals()">

                <div  class="col-md-4"
                      *ngFor="let goal of goals">

                  <div class="row idea-item">
                    <div class="col-sm-12">
                      <figure>
                        <app-goal [goal]="goal" [type]="(category == 'nearby')?'nearby':''"
                                  (onHover)="hideJoin($event)" [userLocation]="userLocation">
                        </app-goal>

                        <app-goal-footer [goal]="goal"></app-goal-footer>
                      </figure>
                    </div>
                  </div>
                </div>
                <!--{% if form.vars.value.title %}data-ng-init="addTitle ='{{ form.vars.value.title }}'" {% endif %}-->
                <!--{{ form_widget(form.title, {'attr': {'class':'form-control title', 'placeholder' : 'Title', 'data-ng-model' : "addTitle",-->
                <!--'data-ng-change' : "searchGoal($event)"} }) }}-->
              </div>
              <div *ngIf="haveIdeas && showIdeas" class="padding-top"></div>
            </div>
          </div>

          <div class="row bg-grey" *ngIf="haveIdeas && showIdeas" >
            <div class="col-xs-12">
              <div class="row no-gutter existing-menu">
                <div class="col-xs-10">
                  <h3 class="text-left pull-left text-dark">{{ 'goal.existing'|translate }}</h3>

                  <a href="#" (click)="slickConfig.method.slickPrev()">
                    <i class="icon-arrow-left">
                      <span class="path1"></span><span class="path2"></span>
                    </i>
                  </a>

                  <a href="#" (click)="slickConfig.method.slickNext()">
                    <i class="icon-arrow-right"></i>
                  </a>

                </div>
                <div class="col-xs-2 text-right" *ngIf="isMore">

                  <a href="#" (click)="$parent.$parent.showIdeas = false">
                    <i class="icon-remove-video-link"><span class="path2"></span><span class="path3"></span></i>
                  </a>

                </div>
              </div>
              <!--<slick settings="slickConfig" class="row idea-item">-->
                <!--<div class="col-md-4 goals-animate" *ngFor=" let goal of Ideas.items">-->
                     <!--&lt;!&ndash;data-ng-cloak&ndash;&gt;-->

                  <!--<figure>-->
                    <!--<h3>-->
                      <!--<a routerLink="{{ env_prefix }}/goal/{{goal.slug }}">{{goal.title }}</a>-->
                    <!--</h3>-->

                    <!--<a routerLink="{{ env_prefix }}/goal/{{goal.slug }}"-->
                       <!--class="goalTitle">-->
                      <!--<span class="overlay"></span>-->
                      <!--<img *ngIf="goal.cached_image" src="{{goal.cached_image}}" alt="{{goal.title}}"/>-->
                    <!--</a>-->

                    <!--<div class="absolute">-->
                      <!--<ul>-->
                        <!--<li>-->
                          <!--<a routerLink="{{ env_prefix }}/listed-users/[[ ::goal.slug ]]" [hidden]="!castInt(goal.stats.listedBy)">-->
                                                             <!--<span>-->
                                                                <!--{{ 'home_listed_by'|translate | capitalize }}-->
                                                                <!--{{goal.stats.listedBy }}-->
                                                             <!--</span>-->
                            <!--<i class="icon-user-small"></i>-->
                          <!--</a>-->

                                                        <!--<span class="text-white ng-hide" [hidden]="castInt(goal.stats.listedBy)">-->
                                                            <!--{{ 'home_listed_by'|translate | capitalize }}-->
                                                            <!--{{goal.stats.listedBy }}-->
                                                            <!--<i [hidden]="castInt(goal.stats.listedBy)" class="ng-hide icon-user-small"></i>-->
                                                        <!--</span>-->
                        <!--</li>-->
                        <!--<li>-->
                          <!--<a routerLink="{{ env_prefix }}/done-users/[[ ::goal.slug ]]" [hidden]="!castInt(goal.stats.doneBy)">-->
                                                             <!--<span>-->
                                                                <!--{{ 'home_complete'|translate | capitalize }}-->
                                                                <!--{{goal.stats.doneBy }}-->
                                                             <!--</span>-->
                            <!--<i class="icon-user-small"></i>-->
                          <!--</a>-->

                                                        <!--<span class="text-white ng-hide" [hidden]="castInt(goal.stats.doneBy)">-->
                                                            <!--{{ 'home_complete'|translate | capitalize }}-->
                                                            <!--{{goal.stats.doneBy}}-->
                                                            <!--<i [hidden]="castInt(goal.stats.doneBy)" class="ng-hide icon-user-small"></i>-->
                                                        <!--</span>-->
                        <!--</li>-->
                      <!--</ul>-->
                    <!--</div>-->

                    <!--<figcaption>-->
                      <!--&lt;!&ndash;{%  include "AppBundle:Blocks:goalFooter.html.twig"  %}&ndash;&gt;-->
                    <!--</figcaption>-->
                  <!--</figure>-->
                <!--</div>-->
              <!--</slick>-->
            </div>
          </div>

          <div class="row bg-white">
            <div class="col-xs-10 col-xs-offset-1 ">

              <div class="form-group">

                <!--{{ form_widget(form.description, {'attr': {'class':'form-control margin-top', 'placeholder' : 'Description', 'rows' :"4", "data-ng-model":"description", "data-ng-init":"description =\"" ~ form.vars.value.description |replace({'\"': '\\\"'})  ~ "\"", "data-value" : "[[ description ]]" } }) }}-->
                <div class="tags" >
                  <!--data-ng-cloak-->
                  <button *ngFor=" let tag of tags" type="button" class="btn btn-purple"> {{tag }} </button>
                </div>

                <p class="text-gray">
                  <!--{{ 'goal.description_title'|trans|raw}}-->
                </p>
                <!--{{ form_widget(form.hashTags, {'attr': { "value" : "[[ tags ]]" } }) }}-->

              </div>

              <div class="text-center" >
                <!--data-ng-init="initDropzone('{{ path('app_rest_goal_addimages') }}')"-->
                <div class="dropzone" id="goalDropzone">
                  <div class="dz-message">
                    <div class="row">
                      <div class="col-sm-12">
                        <span class="btn-purple">
                            <i class="icon-cloud"></i>BROWSE
                        </span>

                        <h3 class="text-dark-gray">
                          {{ 'drag_drop'|translate }}
                        </h3>
                      </div>
                    </div>

                    <p class="text-gray" [innerHTML]="'upload'|translate"></p>
                    <!--| raw-->
                  </div>
                </div>
              </div>

              <!--{{ form_widget(form.files, {'attr': { "value" : "[[ files ]]" } }) }}-->

              <!--{% set images = form.vars.value.images %}-->

              <div class="row">
                <!--{% for image in images %}-->
                <div class="col-sm-2">
                  <a>
                    <!--href="{{ path("app_get_rest_goal_removeimage", {'id' : image.id }) }}"-->
                  <i class="icon-remove-video-link"><span class="path1"></span><span class="path2"></span><span class="path3"></span></i>
                  </a>
                  <!--<img src="{{ image.downloadLink }}" alt="{{ image.filename }}" class="img-responsive"/>-->
                </div>
                <!--{% endfor %}-->
              </div>
              <br />

              <div>
                      <!--{% if not is_granted("ROLE_ADMIN") %} class="sr-only" {% endif %}>-->
              <!--{{ form_widget(form.language, {'attr': {'class':'form-control' } }) }}-->
            </div>

            <br />
            <!--{{ form_widget(form.videoLink, {'attr': {'class':'form-control', 'placeholder' : 'Type in a youtube or vimeo link in the field', 'ng-model': 'videolink' } }) }}-->
            <br class="hidden-xs"/>
          </div>
        </div>

        <!--{{ form_widget(form._token) }}-->
      </div>
    </div>
  </div>
  </div>
</form>
<!--{% endblock %}-->

<!--{% block javascripts %}-->
<!--{{ parent() }}-->

<!--{% javascripts output='js/app_goal_add.js'-->
<!--'bundles/app/js/images.js'-->
<!--%}-->
<script type="text/javascript" [src]="{{ asset_url }}"></script>
<!--{% endjavascripts %}-->

<!--{% endblock %}-->

<!--{%- block title -%}-->
<!--{{ 'goal.add_title'|trans() }}-->
<!--{%- endblock -%}-->

<!--{%- block meta_description -%}-->
<!--{{ 'goal.add_description'|trans() }}-->
<!--{%- endblock -%}-->

<!--{%- block og_url -%}-->
<!--{{- app.request.uri -}}-->
<!--{%- endblock -%}-->
