webpackJsonp([9,13],{1083:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),a=i(14),o=i(1162),s=i(219),r=i(28),l=i(558),p=i(559),c=(i.n(p),i(1176)),d=i(79);i.d(e,"GoalCreateModule",function(){return f});var g=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(o<3?a(s):o>3?a(e,i,s):a(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(){}return t=g([i.i(n.NgModule)({imports:[a.CommonModule,c.a,s.b,l.a,r.a,p.SwiperModule,d.MaterialModule.forRoot()],declarations:[o.a]}),u("design:paramtypes",[])],t)}()},1153:function(t,e){t.exports=".blur{-webkit-filter:blur(20px);-moz-filter:blur(20px);-o-filter:blur(20px);-ms-filter:blur(20px);filter:blur(20px)}.buttons{margin:0 0 5px 0}.buttons button,.buttons a{display:inline-block;padding:4px 7px;margin-left:1px;font-size:12px;margin-bottom:8px}.buttons button span,.buttons a span{line-height:20px}.buttons button i.icon-arrow-right,.buttons a i.icon-arrow-right,.buttons button i.icon-arrow-left,.buttons a i.icon-arrow-left{font-size:20px;vertical-align:middle}.buttons button:first-child,.buttons a:first-child{border:1px solid #e3e3e3;color:#999999}.buttons button:hover,.buttons a:hover{background-color:#5e1dc3;color:#ffffff;box-shadow:none}.buttons button:active,.buttons a:active,.buttons button:focus,.buttons a:focus,.buttons button:visited,.buttons a:visited{box-shadow:none;outline:0;background-color:#4f3576}.buttons button:focus,.buttons a:focus{color:#ffffff}.buttons .btn-transparent{padding:4px 6px 4px 7px}.buttons .icon-right{margin-left:15px}.suggest-input{padding:21px 0 0 16px}#goal-create-form h3.text-purple,.goal-preview h3.text-purple{margin:18px 0 0;font-size:17px;line-height:25px}#goal-create-form p,.goal-preview p{font-size:12px;line-height:18px}.goals{padding-bottom:20px;margin:15px 0 0}.goals .margin-top{margin-top:5px}.goals a .icon-arrow-right,.goals a .icon-arrow-left,.goals a i.icon-remove-video-link{display:inline-block;color:#999999;font-size:20px;margin-top:3px;line-height:45px}.goals a i.icon-remove-video-link{margin-right:15px}.goals a:hover{text-decoration:none}.goals h3{font-weight:700;font-size:20px;line-height:normal;margin-top:10px;padding:0 2px 0 14px}.goals .title{border:0;border-bottom:1px solid #e6e6e6;font-size:12px;border-radius:0;box-shadow:none;color:#333333}.goals .form-group p{font-size:12px;text-align:justify}.goals .form-group .relative{margin-bottom:5px}.goals .tags{margin:10px 0;white-space:normal}.goals .tags button{padding:5px 25px;margin:0 10px 5px 0;white-space:normal;word-break:break-word;text-align:left}.goals textarea{resize:none}.goals figure{margin:0 0 20px 0}@media (min-width:768px){.buttons{margin:5px 0 20px}.buttons button,.buttons a{margin-bottom:0;padding:5px 15px;margin-left:5px;font-size:12px}.buttons button span,.buttons a span{line-height:27px}.buttons button i.icon-arrow-right,.buttons a i.icon-arrow-right,.buttons button i.icon-arrow-left,.buttons a i.icon-arrow-left{font-size:25px}.buttons .btn-transparent{padding:4px 15px}.suggest-input{padding:22px 0 0 22px}#goal-create-form h3.text-purple,.goal-preview h3.text-purple{margin:15px 0 0;font-size:20px;line-height:30px}#goal-create-form p,.goal-preview p{font-size:13px;line-height:19px}.goals{margin:30px 0}.goals .margin-top{margin-top:15px}.goals a .icon-arrow-right,.goals a .icon-arrow-left,.goals a i.icon-remove-video-link{font-size:30px;margin-top:13px}.goals a i.icon-remove-video-link{font-size:40px}.goals .title{margin-top:10px;font-size:45px;height:73px;line-height:65px;padding:5px 0 10px}.goals h3.title{margin-top:0;padding:17px 40px;font-size:25px;line-height:35px;height:auto}.goals h3{margin-top:20px;font-size:25px;padding:0 2px 0 15px}.goals .form-group p{font-size:13px}.goals .relative{margin-bottom:5px}}@media (min-width:992px){.buttons{margin:40px 0}.buttons button,.buttons a{padding:6px 25px;margin-left:10px;font-size:12px}.buttons .btn-transparent{padding:5px 25px}.suggest-input{padding:35px 0 0 22px}#goal-create-form h3.text-purple,.goal-preview h3.text-purple{margin:27px 0 0;font-size:24px;line-height:36px}#goal-create-form p,.goal-preview p{font-size:14px;line-height:21px}.goals .margin-top{margin-top:30px}.goals .form-group p{font-size:14px}.goals a .icon-arrow-right,.goals a .icon-arrow-left,.goals a i.icon-remove-video-link{margin-top:30px}.goals a i.icon-remove-video-link{margin-right:0}.goals .title{margin-top:15px;font-size:52px;height:83px;padding:5px 0 11px 0}.goals h3{margin-top:31px;padding:0}.goals h3.title{padding:17px 40px;font-size:25px;line-height:35px;height:auto}.goals .relative{margin-bottom:5px}.goals .remove-icon .icon-remove-video-link{font-size:27px}}.description-tooltip{position:absolute;z-index:1000;top:136px;text-align:center;background-color:#ffffff;color:#333333;border:1px solid #b0b0b0;min-width:150px;height:34px;line-height:normal;padding:5px 10px;border-radius:4px;-webkit-border-radius:4px;-moz-border-radius:4px;-ms-border-radius:4px;-o-border-radius:4px}.description-tooltip .arrow-up{top:-10px;left:60px;position:absolute;border-bottom-color:#b0b0b0;border-top-color:#b0b0b0}"},1162:function(t,e,i){"use strict";var n=i(0),a=i(10),o=i(44),s=i(22),r=i(26);i.d(e,"a",function(){return c});var l=this&&this.__decorate||function(t,e,i,n){var a,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(a=t[r])&&(s=(o<3?a(s):o>3?a(e,i,s):a(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e,i,n,a,o){var r=this;this.router=t,this.route=e,this.renderer=i,this.broadcaster=n,this._projectService=a,this._cacheService=o,this.isPublic=!0,this.disablePreview=!1,this.isPrivate=!1,this.invalidDescription=!1,this.files=[],this.existingFiles=[],this.language="en",this.videos_array=[],this.title="",this.description="",this.imageCount=6,this.showIdeas=!0,this.haveIdeas=!1,this.isMore=!1,this.start=0,this.count=9,this.config={observer:!0,autoHeight:!0,loop:!1,slidesPerView:3,nextButton:".icon-arrow-right",prevButton:".icon-arrow-left",spaceBetween:30},this.languages=[{value:"en",name:"English"},{value:"ru",name:"Russian"},{value:"fr",name:"French"},{value:"nl",name:"Dutch"}],t.events.subscribe(function(t){r.eventId!=t.id&&t instanceof s.a&&(r.eventId=t.id,r.id=r.route.snapshot.params.id,console.log(r.id),r.slug=r.route.snapshot.params.status,r.isPrivate=r.slug&&"drafts"!=r.slug,r.id?r._projectService.getGoalMyId(r.id).subscribe(function(t){r.goal=t.goal,r.isPublic=r.goal.status,r.title=r.goal.title,r.description=r.goal.description,r.changeDescription(),r.language=r.goal.language,r.existingFiles=r.goal.images;for(var e=0,i=r.existingFiles;e<i.length;e++){var n=i[e];r.files.push(n.id)}r.goal.video_link&&r.goal.video_link.length&&(r.videos_array=r.goal.video_link),r.videos_array.push("")}):r.videos_array.push(""))})}return t.prototype.ngOnInit=function(){var t=this;this.appUser=this._projectService.getMyUser(),this.appUser||(this.appUser=this._cacheService.get("user_"),this.appUser||this._projectService.getUser().subscribe(function(e){t.appUser=e,t._cacheService.set("user_",e,{maxAge:259200})}))},t.prototype.changeDescription=function(){this.invalidDescription=!1;var t=/(#[a-z0-9][a-z0-9\-_]+)/gi;this.tags=this.description.match(t)},t.prototype.preview=function(){var t=this;if(!this.description)return void(this.invalidDescription=!0);if(!this.disablePreview){for(var e=[],i=0;i<this.videos_array.length;i++)this.videos_array[i]&&this.isVideoLink(this.videos_array[i])&&e.push(this.videos_array[i]);this._projectService.createGoal({is_public:this.isPublic,title:this.title,description:this.description,video_links:e,language:this.language,files:this.files,tags:this.tags},this.id).subscribe(function(e){t.router.navigate(["/goal/"+e.slug+"/view"])})}},t.prototype.createDraft=function(){var t=this;if(!this.description)return void(this.invalidDescription=!0);for(var e=[],i=0;i<this.videos_array.length;i++)this.videos_array[i]&&this.isVideoLink(this.videos_array[i])&&e.push(this.videos_array[i]);this._projectService.createGoal({is_public:this.isPublic,title:this.title,description:this.description,video_links:e,language:this.language,files:this.files,tags:this.tags},this.id).subscribe(function(){t.router.navigate(["/goal/my-ideas/drafts"])})},t.prototype.isVideoLink=function(t){return!(!t||t.indexOf("https:/")==-1)},t.prototype.save=function(){var t=this;if(!this.description)return void(this.invalidDescription=!0);for(var e=[],i=0;i<this.videos_array.length;i++)this.videos_array[i]&&this.isVideoLink(this.videos_array[i])&&e.push(this.videos_array[i]);this._projectService.createGoal({is_public:this.isPublic,title:this.title,description:this.description,video_links:e,language:this.language,files:this.files,tags:this.tags},this.id).subscribe(function(e){t._projectService.addUserGoal(e.id,{}).subscribe(function(i){t.broadcaster.broadcast("addModal",{userGoal:i,newAdded:!0,newCreated:!0}),t.broadcaster.on("saveUserGoal_"+i.id).subscribe(function(e){var i=t._cacheService.get("flash_massage");i=i?i:[],i.push(t.isPublic?"goal.was_created.public":"goal.was_created.private"),t._cacheService.set("flash_massage",i,{maxAge:259200}),t.router.navigate(["/profile/my/all"])}),t.broadcaster.on("addGoal"+e.id).subscribe(function(e){var i=t._cacheService.get("flash_massage");i=i?i:[],i.push(t.isPublic?"goal.was_created.public":"goal.was_created.private"),t._cacheService.set("flash_massage",i,{maxAge:259200}),t.router.navigate(["/profile/my/all"])})})})},t.prototype.getGoals=function(){var t=this;clearTimeout(this.writeTimeout),this.goals=[];var e=this;e.title&&(this.writeTimeout=setTimeout(function(){e._projectService.getIdeaGoals(e.start,e.count,e.title).subscribe(function(i){e.goals=i,t.config.loop=i.length>3,e.isMore=i.length>0,e.haveIdeas=!(!i.length||!e.title)})},600))},t=l([i.i(n.Component)({selector:"app-goal-create",template:i(1214),styles:[i(1153)]}),p("design:paramtypes",["function"==typeof(e="undefined"!=typeof s.c&&s.c)&&e||Object,"function"==typeof(c="undefined"!=typeof s.b&&s.b)&&c||Object,"function"==typeof(d="undefined"!=typeof n.Renderer&&n.Renderer)&&d||Object,"function"==typeof(g="undefined"!=typeof r.a&&r.a)&&g||Object,"function"==typeof(u="undefined"!=typeof a.a&&a.a)&&u||Object,"function"==typeof(f="undefined"!=typeof o.a&&o.a)&&f||Object])],t);var e,c,d,g,u,f}()},1176:function(t,e,i){"use strict";var n=i(22),a=i(1162);i.d(e,"a",function(){return s});var o=[{path:"",component:a.a},{path:":id",component:a.a},{path:":id/:status",component:a.a}],s=n.d.forChild(o)},1214:function(t,e){t.exports='<form id="goal-create-form" class="main-form">\n    <div class="content-top bg-white">\n        <div class="container">\n            <div class="row">\n                <div class="col-md-6">\n\n                    <div class="row">\n                        <div class="col-xs-1 suggest-input">\n                            <md-checkbox class="example-margin" name="isPublic" [(ngModel)]="isPublic">\n                            </md-checkbox>\n                        </div>\n\n                        <div class="col-xs-11">\n                            <h3 class="text-purple">\n                                {{ \'goal.public\'|translate }}\n                            </h3>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="col-sm-10 col-sm-offset-1">\n                            <p class="text-gray">{{ \'goal.agree\'|translate }}</p>\n                        </div>\n                    </div>\n\n                </div>\n\n                <div class="col-md-6 text-right">\n                    <div class="buttons">\n\n                        <button (click)="preview()" class="btn btn-transparent goal-view-submit"\n                                name="btn_preview">\n                            <span>{{ \'goal.preview\'|translate }}</span>\n                        </button>\n\n                        <button *ngIf="!isPrivate" (click)="createDraft()" class="btn btn-transparent draft-save-submit" name="btn_save_draft">\n                            <span *ngIf="!id">{{ \'draft.create\'|translate }}</span>\n                            <span *ngIf="id">{{ \'draft.update\'|translate }}</span>\n                        </button>\n\n                        <button type="submit" (click)="save()"\n                                class="btn btn-purple goal-create-submit"\n                                name="btn_publish">\n                            <span *ngIf="id && isPrivate">{{ \'goal.edit\'|translate }}</span>\n                            <span *ngIf="!id || !isPrivate">{{ \'goal.publish\'|translate }}</span>\n                            <i class="icon-arrow-right"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="container">\n        <div class="row">\n            <div class="col-sm-12">\n                <div class="goals">\n\n                    <div class="row bg-white">\n                        <div class="col-xs-10 col-xs-offset-1">\n                            <div class="form-group">\n                                <input type="text" name="title" required="required" maxlength="64" pattern=".{3,}"\n                                       class="form-control title" placeholder="Title" autocomplete="off"\n                                       [(ngModel)]="title"\n                                       (ngModelChange)="getGoals()">\n\n                            </div>\n                            <div *ngIf="haveIdeas && showIdeas" class="padding-top"></div>\n                        </div>\n                    </div>\n\n                    <div class="row bg-grey" *ngIf="haveIdeas && showIdeas">\n                        <swiper [config]="config" class="swiper-container col-xs-12">\n                            <div class="row no-gutter existing-menu">\n                                <div class="col-xs-10">\n                                    <h3 class="text-left pull-left text-dark">{{ \'goal.existing\'|translate }}</h3>\n\n                                    <a>\n                                        <i class="icon-arrow-left">\n                                            <span class="path1"></span><span class="path2"></span>\n                                        </i>\n                                    </a>\n\n                                    <a>\n                                        <i class="icon-arrow-right"></i>\n                                    </a>\n\n                                </div>\n                                <div class="col-xs-2 text-right" *ngIf="isMore">\n\n                                    <a (click)="showIdeas = false">\n                                        <i class="icon-remove-video-link"><span class="path2"></span><span\n                                                class="path3"></span></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n                            <div class="row idea-item swiper-wrapper">\n                                <div class="col-md-4 goals-animate swiper-slide" style="margin-top: 10px" *ngFor="let goal of goals">\n\n                                    <div class="row idea-item">\n                                        <div class="col-sm-12">\n                                            <figure>\n                                                <app-goal [goal]="goal">\n                                                </app-goal>\n\n                                                <app-goal-footer [goal]="goal"></app-goal-footer>\n                                            </figure>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </swiper>\n                    </div>\n\n                    <div class="row bg-white">\n                        <div class="col-xs-10 col-xs-offset-1 ">\n\n                            <div class="form-group">\n\n                                <textarea [class.border-purple]="invalidDescription" class="form-control margin-top" [(ngModel)]="description" name="description" placeholder="Description" rows="4" (ngModelChange)="changeDescription()"></textarea>\n                                <div *ngIf="invalidDescription" class="description-tooltip">\n                                    <span class="arrow-up"></span>\n                                        Please fill out this field\n                                </div>\n\n                                <div class="tags">\n                                    <button *ngFor="let tag of tags" type="button" class="btn btn-purple">\n                                        {{tag }}\n                                    </button>\n                                </div>\n\n                                <p class="text-gray" [innerHTML]="\'goal.description_title\' | translate">\n                                </p>\n\n                            </div>\n\n                            <div class="text-center">\n                                <my-dropzone [files]="files" [type]="\'goal\'" [existing]="existingFiles" [count]="imageCount"></my-dropzone>\n                            </div>\n                            <br/>\n\n                            <div class="language lng" [class.sr-only]="!appUser.is_admin">\n                                <md-select placeholder="Language" style="width: 100%" [(ngModel)]="language" name="language">\n                                    <md-option *ngFor="let language of languages" [value]="language.value">\n                                        {{ language.name }}\n                                    </md-option>\n                                </md-select>\n                            </div>\n\n                            <br/>\n                            <input-video *ngFor="let video of videos_array; let i = index"\n                                         [key]="i"\n                                         [limit]="3"\n                                         [link]="video"\n                                         [array]="videos_array">\n                            </input-video>\n                            <br />\n                        </div>\n                    </div>\n\n                </div>\n\n            </div>\n        </div>\n\n    </div>\n\n</form>'}});