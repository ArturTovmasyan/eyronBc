webpackJsonp([9,13],{1112:function(t,e,i){"use strict";var n=i(0),o=i(14),a=i(1191),s=i(223),r=i(28),l=i(569),p=i(570),d=(i.n(p),i(1206)),c=i(54);i.d(e,"GoalCreateModule",function(){return h});var g=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,i,s):o(e,i))||s);return a>3&&s&&Object.defineProperty(e,i,s),s},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(){function t(){}return t=g([i.i(n.NgModule)({imports:[o.CommonModule,d.a,s.a,l.a,r.c,p.SwiperModule,c.MaterialModule.forRoot()],declarations:[a.a]}),u("design:paramtypes",[])],t)}()},1182:function(t,e){t.exports=".blur{-webkit-filter:blur(20px);-moz-filter:blur(20px);-o-filter:blur(20px);-ms-filter:blur(20px);filter:blur(20px)}.buttons{margin:0 0 5px 0}.buttons button[md-button],.buttons a[md-button]{display:inline-block;padding:3px 7px 4px;margin-left:1px;font-size:12px;line-height:20px;margin-bottom:8px;min-width:60px}.buttons button[md-button] span,.buttons a[md-button] span{line-height:20px}.buttons button[md-button] i.icon-arrow-right,.buttons a[md-button] i.icon-arrow-right,.buttons button[md-button] i.icon-arrow-left,.buttons a[md-button] i.icon-arrow-left{font-size:20px;vertical-align:middle}.buttons button[md-button]:first-child,.buttons a[md-button]:first-child{border:1px solid #e3e3e3;color:#999999}.buttons button[md-button]:hover,.buttons a[md-button]:hover{background-color:#5e1dc3;color:#ffffff;box-shadow:none}.buttons button[md-button]:active,.buttons a[md-button]:active,.buttons button[md-button]:focus,.buttons a[md-button]:focus,.buttons button[md-button]:visited,.buttons a[md-button]:visited{box-shadow:none;outline:0;background-color:#4f3576}.buttons button[md-button]:focus,.buttons a[md-button]:focus{color:#ffffff}.buttons .btn-transparent{padding:4px 6px 4px 7px}.buttons .icon-right{margin-left:15px}.suggest-input{padding:21px 0 0 16px}#goal-create-form h3.text-purple,.goal-preview h3.text-purple{margin:18px 0 0;font-size:17px;line-height:25px}#goal-create-form p,.goal-preview p{font-size:12px;line-height:18px}.goals{padding-bottom:20px;margin:15px 0 0}.goals .swiper-wrapper{margin:0 auto}.goals .margin-top{margin-top:5px}.goals a .icon-arrow-right,.goals a .icon-arrow-left,.goals a i.icon-remove-video-link{display:inline-block;color:#999999;font-size:25px;margin-top:3px;line-height:45px}.goals a i.icon-remove-video-link{margin-right:25px;font-size:33px}.goals a:hover{text-decoration:none}.goals h3{font-weight:700;font-size:20px;line-height:normal;margin-top:10px;padding:0 2px 0 14px}.goals .title{border:0;border-bottom:1px solid #e6e6e6;font-size:12px;border-radius:0;box-shadow:none;color:#333333}.goals .form-group p{font-size:12px;text-align:justify}.goals .form-group .relative{margin-bottom:5px}.goals .tags{margin:10px 0;white-space:normal}.goals .tags button{padding:5px 25px;margin:0 10px 5px 0;white-space:normal;word-break:break-word;text-align:left}.goals textarea{resize:none}.goals figure{margin:0 0 20px 0}.existing-menu a{display:inline-block}.existing-menu .icon-arrow-left{margin-left:10px}@media (min-width:768px){.buttons{margin:5px 0 20px}.buttons button[md-button],.buttons a[md-button]{margin-bottom:0;padding:5px 15px;margin-left:5px}.buttons button[md-button] span,.buttons a[md-button] span{line-height:27px}.buttons button[md-button] i.icon-arrow-right,.buttons a[md-button] i.icon-arrow-right,.buttons button[md-button] i.icon-arrow-left,.buttons a[md-button] i.icon-arrow-left{font-size:25px}.buttons .btn-transparent{padding:4px 15px}.suggest-input{padding:22px 0 0 22px}#goal-create-form h3.text-purple,.goal-preview h3.text-purple{margin:15px 0 0;font-size:20px;line-height:30px}#goal-create-form p,.goal-preview p{font-size:13px;line-height:19px}.goals{margin:30px 0}.goals .margin-top{margin-top:15px}.goals a .icon-arrow-right,.goals a .icon-arrow-left,.goals a i.icon-remove-video-link{font-size:30px;margin-top:13px}.goals a i.icon-remove-video-link{font-size:40px;margin-right:18px}.goals .title{margin-top:10px;font-size:45px;height:73px;line-height:65px;padding:5px 0 10px}.goals h3.title{margin-top:0;padding:17px 40px;font-size:25px;line-height:35px;height:auto}.goals h3{margin-top:16px;font-size:25px;padding:0 2px 0 15px}.goals .form-group p{font-size:13px}.goals .relative{margin-bottom:5px}}@media (min-width:992px){.buttons{margin:40px 0}.buttons button[md-button],.buttons a[md-button]{padding:6px 25px;margin-left:10px}.buttons .btn-transparent{padding:5px 25px}.suggest-input{padding:35px 0 0 22px}.existing-menu{margin-bottom:10px}#goal-create-form h3.text-purple,.goal-preview h3.text-purple{margin:27px 0 0;font-size:24px;line-height:36px}#goal-create-form p,.goal-preview p{font-size:14px;line-height:21px}.goals .margin-top{margin-top:30px}.goals .form-group p{font-size:14px}.goals a .icon-arrow-right,.goals a .icon-arrow-left,.goals a i.icon-remove-video-link{margin-top:30px}.goals .title{margin-top:15px;font-size:52px;height:83px;padding:5px 0 11px 0}.goals h3{margin-top:31px}.goals h3.title{padding:17px 40px;font-size:25px;line-height:35px;height:auto}.goals .relative{margin-bottom:5px}.goals .remove-icon .icon-remove-video-link{font-size:27px}}"},1191:function(t,e,i){"use strict";var n=i(0),o=i(9),a=i(30),s=i(12),r=i(25);i.d(e,"a",function(){return d});var l=this&&this.__decorate||function(t,e,i,n){var o,a=arguments.length,s=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(s=(a<3?o(s):a>3?o(e,i,s):o(e,i))||s);return a>3&&s&&Object.defineProperty(e,i,s),s},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,i,n,o,a){var r=this;this.router=t,this.route=e,this.renderer=i,this.broadcaster=n,this._projectService=o,this._cacheService=a,this.isPublic=!0,this.disablePreview=!1,this.isPrivate=!1,this.invalidDescription=!1,this.files=[],this.existingFiles=[],this.language="en",this.videos_array=[],this.title="",this.description="",this.imageCount=6,this.showIdeas=!0,this.haveIdeas=!1,this.isMore=!1,this.isDestroy=!1,this.start=0,this.count=9,this.config={observer:!0,autoHeight:!0,loop:!1,slidesPerView:window.innerWidth<768?1:window.innerWidth<992?2:3,nextButton:".icon-arrow-right",prevButton:".icon-arrow-left",spaceBetween:0},this.languages=[{value:"en",name:"English"},{value:"ru",name:"Russian"},{value:"fr",name:"French"},{value:"nl",name:"Dutch"}],t.events.subscribe(function(t){!r.isDestroy&&r.eventId!=t.id&&t instanceof s.NavigationEnd&&(r.eventId=t.id,r.id=r.route.snapshot.params.id,console.log(r.id),r.slug=r.route.snapshot.params.status,r.isPrivate=r.slug&&"drafts"!=r.slug,window.scrollTo(0,0),r.id?r._projectService.getGoalMyId(r.id).subscribe(function(t){r.goal=t.goal,r.isPublic=r.goal.status,r.title=r.goal.title,r.description=r.goal.description,r.changeDescription(),r.language=r.goal.language,r.existingFiles=r.goal.images;for(var e=0,i=r.existingFiles;e<i.length;e++){var n=i[e];r.files.push(n.id)}r.goal.video_link&&r.goal.video_link.length&&(r.videos_array=r.goal.video_link),r.videos_array.push("")}):r.videos_array.push(""))})}return t.prototype.ngOnDestroy=function(){this.isDestroy=!0},t.prototype.ngOnInit=function(){var t=this;this.appUser=this._projectService.getMyUser(),this.appUser||(this.appUser=this._cacheService.get("user_"),this.appUser||this._projectService.getUser().subscribe(function(e){t.appUser=e,t._cacheService.set("user_",e,{maxAge:259200})}))},t.prototype.changeDescription=function(){this.invalidDescription=!1;var t=/(#[a-z0-9][a-z0-9\-_]+)/gi;this.tags=this.description.match(t)},t.prototype.preview=function(){var t=this;if(!this.description)return void(this.invalidDescription=!0);if(!this.disablePreview){for(var e=[],i=0;i<this.videos_array.length;i++)this.videos_array[i]&&this.isVideoLink(this.videos_array[i])&&e.push(this.videos_array[i]);this._projectService.createGoal({is_public:this.isPublic,title:this.title,description:this.description,video_links:e,language:this.language,files:this.files,tags:this.tags},this.id).subscribe(function(e){t.router.navigate(["/goal/"+e.slug+"/view"])})}},t.prototype.createDraft=function(){var t=this;if(!this.description)return void(this.invalidDescription=!0);for(var e=[],i=0;i<this.videos_array.length;i++)this.videos_array[i]&&this.isVideoLink(this.videos_array[i])&&e.push(this.videos_array[i]);this._projectService.createGoal({is_public:this.isPublic,title:this.title,description:this.description,video_links:e,language:this.language,files:this.files,tags:this.tags},this.id).subscribe(function(){t.router.navigate(["/goal/my-ideas/drafts"])}),this.broadcaster.broadcast("draftCount")},t.prototype.isVideoLink=function(t){return!(!t||t.indexOf("https:/")==-1)},t.prototype.save=function(){var t=this;if(!this.description)return void(this.invalidDescription=!0);for(var e=[],i=0;i<this.videos_array.length;i++)this.videos_array[i]&&this.isVideoLink(this.videos_array[i])&&e.push(this.videos_array[i]);this._projectService.createGoal({is_public:this.isPublic,title:this.title,description:this.description,video_links:e,language:this.language,files:this.files,tags:this.tags},this.id).subscribe(function(e){t._projectService.addUserGoal(e.id,{}).subscribe(function(i){t.broadcaster.broadcast("addModal",{userGoal:i,newAdded:!0,newCreated:!0}),t.broadcaster.on("saveUserGoal_"+i.id).subscribe(function(e){var i=t._cacheService.get("flash_massage");i=i?i:[],i.push(t.isPublic?"goal.was_created.public":"goal.was_created.private"),t._cacheService.set("flash_massage",i,{maxAge:259200}),t.router.navigate(["/profile/my/all"])}),t.broadcaster.on("addGoal"+e.id).subscribe(function(e){var i=t._cacheService.get("flash_massage");i=i?i:[],i.push(t.isPublic?"goal.was_created.public":"goal.was_created.private"),t._cacheService.set("flash_massage",i,{maxAge:259200}),t.router.navigate(["/profile/my/all"])}),t.broadcaster.on("removeGoal"+e.id).subscribe(function(e){t.goal=null,t.isPublic=!0,t.title="",t.description="",t.changeDescription(),t.language="en",t.existingFiles=[],t.files=[],t.videos_array=[]})})})},t.prototype.getGoals=function(t){var e=this;if(""==t)this.goals=[],this.haveIdeas=!1;else{clearTimeout(this.writeTimeout),this.goals=[];var i=this;i.title&&(this.writeTimeout=setTimeout(function(){i._projectService.getIdeaGoals(i.start,i.count,i.title).subscribe(function(t){i.goals=t,e.config.loop=t.length>3,i.isMore=t.length>0,i.haveIdeas=!(!t.length||!i.title)})},600))}},t=l([i.i(n.Component)({selector:"app-goal-create",template:i(1250),styles:[i(1182)]}),p("design:paramtypes",["function"==typeof(e="undefined"!=typeof s.Router&&s.Router)&&e||Object,"function"==typeof(d="undefined"!=typeof s.ActivatedRoute&&s.ActivatedRoute)&&d||Object,"function"==typeof(c="undefined"!=typeof n.Renderer&&n.Renderer)&&c||Object,"function"==typeof(g="undefined"!=typeof r.a&&r.a)&&g||Object,"function"==typeof(u="undefined"!=typeof o.a&&o.a)&&u||Object,"function"==typeof(h="undefined"!=typeof a.a&&a.a)&&h||Object])],t);var e,d,c,g,u,h}()},1206:function(t,e,i){"use strict";var n=i(12),o=i(1191);i.d(e,"a",function(){return s});var a=[{path:"",component:o.a,data:{metadata:{title:"Goal Create",description:"Create Your Goal"}}},{path:":id",component:o.a,data:{metadata:{title:"Goal Edit",description:"Edit Your Goal"}}},{path:":id/:status",component:o.a,data:{metadata:{title:"Goal Edit",description:"Edit Your Goal"}}}],s=n.RouterModule.forChild(a)},1250:function(t,e){t.exports='<form id="goal-create-form" class="main-form">\n    <div class="content-top bg-white">\n        <div class="container">\n            <div class="row">\n                <div class="col-md-6">\n\n                    <div class="row">\n                        <div class="col-xs-1 suggest-input">\n                            <md-checkbox class="example-margin" name="isPublic" [(ngModel)]="isPublic">\n                            </md-checkbox>\n                        </div>\n\n                        <div class="col-xs-11">\n                            <h3 class="text-purple">\n                                {{ \'goal.public\'|translate }}\n                            </h3>\n                        </div>\n                    </div>\n\n                    <div class="row">\n                        <div class="col-sm-10 col-sm-offset-1">\n                            <p class="text-gray">{{ \'goal.agree\'|translate }}</p>\n                        </div>\n                    </div>\n\n                </div>\n\n                <div class="col-md-6 text-right">\n                    <div class="buttons">\n\n                        <button md-button (click)="preview()" class="btn btn-transparent goal-view-submit"\n                                name="btn_preview">\n                            <span>{{ \'goal.preview\'|translate }}</span>\n                        </button>\n\n                        <button md-button *ngIf="!isPrivate" (click)="createDraft()" class="btn btn-transparent draft-save-submit" name="btn_save_draft">\n                            <span *ngIf="!id">{{ \'draft.create\'|translate }}</span>\n                            <span *ngIf="id">{{ \'draft.update\'|translate }}</span>\n                        </button>\n\n                        <button md-button type="submit" (click)="save()"\n                                class="btn btn-purple goal-create-submit"\n                                name="btn_publish">\n                            <span *ngIf="id && isPrivate">{{ \'goal.edit\'|translate }}</span>\n                            <span *ngIf="!id || !isPrivate">{{ \'goal.publish\'|translate }}</span>\n                            <i class="icon-arrow-right"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="container">\n        <div class="row">\n            <div class="col-sm-12">\n                <div class="goals">\n\n                    <div class="row bg-white">\n                        <div class="col-xs-10 col-xs-offset-1">\n                            <div class="form-group">\n                                <input type="text" name="title" required="required" maxlength="64" pattern=".{3,}"\n                                       class="form-control title" placeholder="Title" autocomplete="off"\n                                       [(ngModel)]="title"\n                                       (ngModelChange)="getGoals($event)">\n\n                            </div>\n                            <div *ngIf="haveIdeas && showIdeas" class="padding-top"></div>\n                        </div>\n                    </div>\n\n                    <div class="row bg-grey" *ngIf="haveIdeas && showIdeas">\n                        <swiper [config]="config" class="swiper-container col-xs-12">\n                            <div class="row no-gutter existing-menu">\n                                <div class="col-xs-10">\n                                    <h3 class="text-left pull-left text-dark">{{ \'goal.existing\'|translate }}</h3>\n\n                                    <a>\n                                        <i class="icon-arrow-left">\n                                            <span class="path1"></span><span class="path2"></span>\n                                        </i>\n                                    </a>\n\n                                    <a>\n                                        <i class="icon-arrow-right"></i>\n                                    </a>\n\n                                </div>\n                                <div class="col-xs-2 text-right" *ngIf="isMore">\n\n                                    <a (click)="showIdeas = false">\n                                        <i class="icon-remove-video-link"><span class="path2"></span><span\n                                                class="path3"></span></i>\n                                    </a>\n\n                                </div>\n                            </div>\n\n                            <div class="row idea-item swiper-wrapper">\n                                <div class="col-md-4 goals-animate swiper-slide" style="margin-top: 10px" *ngFor="let goal of goals">\n\n                                    <div class="row idea-item">\n                                        <div class="col-sm-12">\n                                            <figure>\n                                                <app-goal [goal]="goal">\n                                                </app-goal>\n\n                                                <app-goal-footer [goal]="goal"></app-goal-footer>\n                                            </figure>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </swiper>\n                    </div>\n\n                    <div class="row bg-white">\n                        <div class="col-xs-10 col-xs-offset-1 ">\n\n                            <div class="form-group">\n\n                                <textarea [class.border-purple]="invalidDescription" class="form-control margin-top" [(ngModel)]="description" name="description" placeholder="Description" rows="4" (ngModelChange)="changeDescription()"></textarea>\n                                <div *ngIf="invalidDescription" class="description-tooltip">\n                                    <span class="arrow-up"></span>\n                                        Please fill out this field\n                                </div>\n\n                                <div class="tags">\n                                    <button md-button *ngFor="let tag of tags" type="button" class="btn btn-purple">\n                                        {{tag }}\n                                    </button>\n                                </div>\n\n                                <p class="text-gray" [innerHTML]="\'goal.description_title\' | translate">\n                                </p>\n\n                            </div>\n\n                            <div class="text-center">\n                                <my-dropzone [files]="files" [type]="\'goal\'" [existing]="existingFiles" [count]="imageCount"></my-dropzone>\n                            </div>\n                            <br/>\n\n                            <div class="language lng" [class.sr-only]="!appUser.is_admin">\n                                <md-select placeholder="Language" style="width: 100%" [(ngModel)]="language" name="language">\n                                    <md-option *ngFor="let language of languages" [value]="language.value">\n                                        {{ language.name }}\n                                    </md-option>\n                                </md-select>\n                            </div>\n\n                            <br/>\n                            <input-video *ngFor="let video of videos_array; let i = index"\n                                         [key]="i"\n                                         [limit]="3"\n                                         [link]="video"\n                                         [array]="videos_array">\n                            </input-video>\n                            <br />\n                        </div>\n                    </div>\n\n                </div>\n\n            </div>\n        </div>\n\n    </div>\n\n</form>'}});
//# sourceMappingURL=9.7dd9bcb5459543772016.bundle.map