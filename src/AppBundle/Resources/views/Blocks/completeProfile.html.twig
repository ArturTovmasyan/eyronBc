{% if user is defined %}

    {% set user = userWithRelations(app.user.id) %}

    <div class="bg-white padding">
        <div class="row">
            <em>Complete your profile</em>
            <div class="col-xs-10">

                <div class="progress">
                    <div class="progress-bar progress-bar-striped"
                         role="progressbar"
                         style="width: {{ user.getCompletedPercent()|round(1, 'floor') }}%">
                        {{ user.getCompletedPercent()|round(1, 'floor') }}% {{ 'account.complete'|trans }}
                    </div>
                </div>

            </div>

            <div class="col-xs-2">
                <a class="icon question-icon-circle text-gray"
                   data-ng-class="{'question-icon-circle': !completeProfileProperties, 'up-icon': completeProfileProperties}"
                   data-ng-click="completeProfileProperties=!completeProfileProperties">
                </a>
            </div>
        </div>

    </div>

    <ol class="slide" data-ng-show="completeProfileProperties">
        <li>
            <a href="javascript:void(0)">
                {{ 'security.login.sign_up'|trans({}, 'FOSUserBundle') }}
                <i class="icon icon-ok"></i>
            </a>
        </li>
        <li>
            <a href="javascript:void(0)">{{ 'account.complete_text'|trans }}
                {% if user.registrationToken is null %}
                    <i class="icon icon-ok"></i>
                {% else %}
                    <i class="icon question-icon"></i>
                {% endif %}
            </a>

        </li>
        <li>
            <a href="javascript:void(0)"
               data-ls-jquery-modal
               data-ls-template-url="{{ path('settings') }}"
               data-ls-identity="goalSettingsInCompleteModal">
                <strong>{{ 'image_complete_text'|trans }}</strong>
                {% if user.socialPhotoLink or  user.fileName %}
                    <i class="icon icon-ok"></i>
                {% else %}
                    <i class="icon question-icon"></i>
                {% endif %}
            </a>
        </li>
        <li>
            <a href="{{ path('add_goal') }}"><strong>{{ 'my_bucket_list.add_goal'|trans |capitalize }}</strong>
                {% if user.userGoal|length > 0 %}
                    <i class="icon icon-ok"></i>
                {% else %}
                    <i class="icon question-icon"></i>
                {% endif %}
            </a>
        </li>
        <li>
            <a href="javascript:void(0)">{{ 'deadline.complete_text'|trans }}
                {% if user.checkDeadLines() %}
                    <i class="icon icon-ok"></i>
                {% else %}
                    <i class="icon question-icon"></i>
                {% endif %}
            </a>
        </li>
        <li>
            <a href="javascript:void(0)">{{ 'goal.complete_text'|trans }}
                {% if user.checkCompletedGoals() %}
                    <i class="icon icon-ok"></i>
                {% else %}
                    <i class="icon question-icon"></i>
                {% endif %}
            </a>
        </li>

        <li>
            <a href="javascript:void(0)">{{ 'success_story.complete_text'|trans }}
                {% if user.checkSuccessStory() %}
                    <i class="icon icon-ok"></i>
                {% else %}
                    <i class="icon question-icon"></i>
                {% endif %}
            </a>
        </li>
    </ol>

{% endif %}