{% extends "AppBundle::layout.html.twig" %}

{% block angularApp %} <html ng-app="goal"> {% endblock %}

{% block content %}
    <div class="content-top">
        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                    <a href="javascript:void(0)" data-ng-click="showMap = !showMap"> MAP
                        <span class="glyphicon glyphicon-chevron-up ng-hide" data-ng-show="showMap"></span>
                        <span class="glyphicon glyphicon-chevron-down" data-ng-hide="showMap"></span>
                    </a>
                </div>
                <div class="col-sm-6 text-right">
                    <button type="button"
                        class="btn btn-default purple no-bg"
                        data-container="body"
                        data-toggle="popover"
                        data-placement="bottom"
                        data-content="hello"
                        data-ng-click="filter = !filter"
                        data-template='{% include 'AppBundle:Blocks:filter.html.twig' with { "categories" : categories } %}'>
                        Adveture
                        <span class="glyphicon glyphicon-chevron-up" data-ng-hide="filter"></span>
                        <span class="glyphicon glyphicon-chevron-down ng-hide" data-ng-show="filter"></span>
                    </button>
                </div>
            </div>
        </div>

        <div style="height:300px;border:1px solid #2b2b2b;" class="slide" data-ng-hide="showMap">
            <div data-simple-map-marker style="width: 100%; height: 300px"></div>
        </div>
    </div>

    <div class="container">
        <h2 class="text-center">Discover ideas that inspire you</h2>

        {% if goals %}

        {% endif %}

        <div class="row">
            {% for goal in goals|slice(0, 3)  %}
                <div class="col-sm-6 col-md-4">
                    <figure>
                        {% set image = goal.getPrimaryPhoto %}

                        {% if image %}
                            {% set image = goal.getPrimaryPhoto %}
                        {% endif %}
                        <a href="{{ path('inner_goal', {'id': goal.id }) }}">
                            <img src="{% if image %}{{ image.downloadLink  }} {% endif %}" height="262" alt="{{ goal.title }}">
                        </a>
                        <figcaption>

                            {%  include "AppBundle:Blocks:goalFooter.html.twig" with {'goal' : goal }  %}

                        </figcaption>
                    </figure>
                </div>
            {% endfor %}
        </div>

        <div class="row">
            {% for goal in goals|slice(3, 2)  %}

                <div class="col-md-{{ loop.first ?  4 : 8 }}">
                    <figure>
                        {% set image = goal.getPrimaryPhoto %}

                        {% if image %}
                            {% set image = goal.getPrimaryPhoto %}
                        {% endif %}
                        <a href="{{ path('inner_goal', {'id': goal.id }) }}">
                            <img src="{% if image %}{{ image.downloadLink  }} {% endif %}" height="262" alt="{{ goal.title }}">
                        </a>
                        <figcaption>

                            {%  include "AppBundle:Blocks:goalFooter.html.twig" with {'goal' : goal }  %}

                        </figcaption>
                    </figure>
                </div>

            {% endfor %}
        </div>

        <div class="row">
            {% for goal in goals|slice(5, 2)  %}

                <div class="col-md-{{ loop.first ?  8 : 4 }}">
                    <figure>
                        {% set image = goal.getPrimaryPhoto %}

                        {% if image %}
                            {% set image = goal.getPrimaryPhoto %}
                        {% endif %}
                        <a href="{{ path('inner_goal', {'id': goal.id }) }}">
                            <img src="{% if image %}{{ image.downloadLink  }} {% endif %}" height="581" width="{{ loop.first ?  713 : 346 }}" alt="{{ goal.title }}">
                        </a>
                        <figcaption>

                            {%  include "AppBundle:Blocks:goalFooter.html.twig" with {'goal' : goal }  %}

                        </figcaption>
                    </figure>
                </div>
            {% endfor %}


        </div>
    </div>

    {# display navigation #}
    <div class="navigation">
        {{ knp_pagination_render(goals) }}
    </div>


{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script src="https://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>
    <script src="{{ asset('app/scripts/GoogleMaps/GoogleMaps.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/app/js/angular/goal.js') }}" type="text/javascript"></script>
{% endblock %}

