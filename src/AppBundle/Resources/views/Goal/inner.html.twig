{% extends "AppBundle::layout.html.twig" %}

{% block angularApp %} <html data-ng-app="goal" data-ng-controller="goalInner"> {% endblock %}

{% block stylesheets %}
    {{ parent() }}

    <link href="{{ asset('bundles/app/less/jssor-slider.css') }}" rel="stylesheet"/>
    <link href="{{ asset('app/bower_components/icheck/skins/all.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}
    {{ render(controller('AppBundle:Goal:innerContent', { 'id': goal.id, 'page' : constant("AppBundle\\Entity\\Goal::INNER") })) }}
{% endblock %}

{% block title %}
    {{ goal.title }}
{% endblock %}


{% block meta_description %}
    {# TODO: will be better to move this code to twig extension #}
    {% if goal.description %}
        {% set descriptionSentences = goal.description|split('.') %}
        {% set description = '' %}

        {% for descriptionSentence in descriptionSentences if description|length < 160 %}
            {% if descriptionSentence|length <= (200 - description|length) %}
                {% set description = description ~ descriptionSentence ~ '.' %}
            {% endif %}
        {% endfor %}
        {{ description }}

    {% else %}
        {{ parent() }}
    {% endif %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    {% javascripts output='js/app_goal_inner.js'
        'app/bower_components/jssor-slider/js/jssor.slider.mini.js'
        'app/bower_components/icheck/icheck.min.js'
        'app/bower_components/ScrollToFixed/jquery-scrolltofixed-min.js'
        'app/scripts/Ticker/jquery.ticker.min.js'
        'bundles/app/js/jssor-inner-slider.js'
        'bundles/app/js/angular/goal.js'
        %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}

{% endblock %}
