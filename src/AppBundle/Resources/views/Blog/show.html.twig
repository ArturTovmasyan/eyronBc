{% extends "::amp.html.twig" %}

{% block content %}

    {% set blodData = blog.blogData %}

    <section class="category">
        <h1>{{ blog.title }}</h1>

        <amp-img src="{{ blog.imagePath|blImageFilter('goal_list_small') }}"
                 width="200" height="200">
        </amp-img>

        <p class="text-center">{{ 'goal.see_also'|trans }}</p>

        <amp-live-list layout="container"
                       data-poll-interval="15000"
                       data-max-items-per-page="7"
                       id="amp-live-list-insert-blog">
            <button update
                    on="tap:amp-live-list-insert-blog.update"
                    class="button button-primary button-update">You have updates</button>
            <div items class="samples">

                {% for data in blodData %}

                    {% set content = data.content %}

                    {% if data.type == 'text' %}

                    <p>{{ content }}</p>

                    {% elseif data.type == 'goal' %}

                    <div id="{{ content.title }}"
                         data-sort-time="20161029091050">
                        <div class="card blog">
                            <amp-img src="{{ content.imagePath|blImageFilter('goal_list_small') }}"
                                     layout="responsive"
                                     width="1280"
                                     height="853">
                            </amp-img>
                            <p>{{ content.description|markdown|sliceString }}</p>
                        </div>
                    </div>

                    {% endif %}
                {% endfor %}
            </div>
        </amp-live-list>

    </section>
{% endblock %}

{%- block title -%}
    {{ blog.title }}
{%- endblock -%}

{%- block meta_description -%}
    {{- blog.metaDescription|markdown|striptags|sliceString -}}
{%- endblock -%}