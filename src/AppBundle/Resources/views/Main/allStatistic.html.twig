{% extends "SonataAdminBundle::standard_layout.html.twig" %}

{% block sonata_head_title %}
   All Statistic Page
{% endblock %}

{% block sonata_admin_content %}
    <div data-ng-app="statistic" data-ng-controller="LineCtrl">
        <div class="row">
            <form action="#" method="post" class="form-inline">
                <div class="col-sm-6">
                    <div class="row">
                        <div class="col-sm-3">
                            <label for="type">Type</label>
                            <select name="groupBy" id="type" class="form-control" data-ng-model="type">
                                <option value="email">Email</option>
                                <option value="device">Device</option>
                                <option value="social">Social</option>
                                <option value="published-goal">Published Goal</option>
                                <option value="created-goal">Created Goal</option>
                                <option value="added-goal">Added Goal</option>
                                <option value="completed-goal">Completed Goal</option>
                                <option value="story-create">Story Create</option>
                                <option value="story-like">Story Like</option>
                            </select><br>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group">
                                <label for="from">From</label>
                                <input type="date" class="form-control" id="from" name="from" data-ng-model="dateFrom">
                            </div>

                        </div>
                        <div class="col-sm-3">
                            <div class="form-group">
                                <label for="to">To</label>
                                <input type="date" id="to" class="form-control" name="to" data-ng-model="dateTo">
                            </div>
                        </div>

                        <div class="col-sm-3">
                            <select name="groupBy" class="form-control" data-ng-model="groupType">
                                <option value="month">Monthly</option>
                                {#<option value="week">Weekly</option>#}
                                <option value="day">Day</option>
                            </select><br>
                        </div>
                    </div>

                </div>

                <div class="col-sm-6">
                    <div class="btn btn-primary" data-ng-click="filter()" data-ng-if="groupType && dateTo && dateFrom">Filter</div>
                </div>

            </form>
            <div class="text-center percent-padding" data-ng-if="percent"><h3>Percent: <span class="label label-info" data-ng-bind="(percent | number: 1) + '%'"></span></h3></div>
        </div>
        <br>

        <canvas width="1000px" height="700px" id="line" class="chart chart-line" chart-data="data"
                chart-labels="labels" chart-series="series" chart-options="options"
                chart-click="onClick">
        </canvas>
    </div>

{% endblock %}

{% block stylesheets %}
    {{ parent() }}

    {% stylesheets output='css/app_admin_statistic_edit.css'
    'bundles/app/less/statistic.css'
    %}
    <link rel="stylesheet" type="text/css" href="{{ asset_url }}"/>
    {% endstylesheets %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script src="https://www.youtube.com/iframe_api"></script>

    {% javascripts output='js/app_admin_statistic_edit.js'
    'app/bower_components/moment/min/moment.min.js'
    'app/bower_components/angular/angular.min.js'
    'app/bower_components/chart.js/dist/Chart.min.js'
    'app/bower_components/angular-chart.js/dist/angular-chart.min.js'
    'bundles/app/js/angular/statistic.js'

    %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}