<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>

        <!--  Bucket List Service -->
        <service id="bl_service" class="AppBundle\Services\BucketListService">
            <argument type="service" id="service_container" />
            <argument type="service" id="doctrine.orm.entity_manager" />
        </service>

        <service id="bl.location.type" class="AppBundle\Form\Type\LocationType">
            <tag name="form.type" alias="bl_location" />
        </service>

        <service id="bl.multiple.file" class="AppBundle\Form\Type\BlMultipleFileType">
            <tag name="form.type" alias="bl_multiple_file" />
        </service>

        <service id="bl.multiple.video" class="AppBundle\Form\Type\BlMultipleVideoType">
            <tag name="form.type" alias="bl_multiple_video" />
        </service>

        <!-- service for twig extension replace in string -->
        <service id="bl.replace.in" class="AppBundle\Twig\Extension\ReplaceExtension">
            <tag name="twig.extension"/>
        </service>

        <!-- service for twig extension to get popular goals -->
        <service id="bl.popular.goals.extension" class="AppBundle\Twig\Extension\PopularGoalsExtension">
            <argument type="service" id="doctrine.orm.entity_manager" />
            <tag name="twig.extension"/>
        </service>

        <!-- service for twig extension to get popular goals -->
        <service id="bl.user.relations.extension" class="AppBundle\Twig\Extension\UserWithRelationsExtension">
            <argument type="service" id="service_container" />
            <tag name="twig.extension"/>
        </service>

        <!-- service for twig extension to get new action -->
        <service id="bl.news.extension" class="AppBundle\Twig\Extension\NewActionExtension">
            <argument type="service" id="service_container" />
            <tag name="twig.extension"/>
        </service>

        <service id="bl.policy.link.extension" class="AppBundle\Twig\Extension\GetPolicyLinkExtension">
            <argument type="service" id="service_container" />
            <tag name="twig.extension"/>
        </service>

        <service id="bl.device.type.extension" class="AppBundle\Twig\Extension\DeviceTypeExtension">
            <argument type="service" id="service_container" />
            <tag name="twig.extension"/>
        </service>

        <!-- service for twig extension to get goal friends -->
        <service id="bl.popular.goal.friends.extension" class="AppBundle\Twig\Extension\GoalFriendsExtension">
            <argument type="service" id="doctrine.orm.entity_manager" />
            <tag name="twig.extension"/>
        </service>

        <!-- service for twig extension is my goal -->
        <service id="bl.is_my_goal" class="AppBundle\Twig\Extension\IsMyGoalExtension">
            <tag name="twig.extension"/>
        </service>

        <!-- service for twig extension is replace # in goal description -->
        <service id="bl_replace_description_extension" class="AppBundle\Twig\Extension\ReplaceInDescriptionExtension">
            <tag name="twig.extension"/>
        </service>

        <!-- service for twig extension is get session in twig and cleare session -->
        <service id="bl_get_session_extension" class="AppBundle\Twig\Extension\GetSessionExtension">
            <argument type="service" id="session" />
            <tag name="twig.extension"/>
        </service>

        <!-- service for twig extension location -->
        <service id="bl.location" class="AppBundle\Twig\Extension\LocationExtension">
            <tag name="twig.extension"/>
        </service>

        <!-- service for twig extension is slice string -->
        <service id="bl.string_slice" class="AppBundle\Twig\Extension\StringSliceExtension">
            <tag name="twig.extension"/>
        </service>

        <!-- service doctrine listener -->
        <service id="bl.doctrine.listener" class="AppBundle\Listener\DoctrineListener">
            <argument type="service" id="service_container" />
            <tag name="doctrine.event_listener" event = "onFlush"/>
            <tag name="doctrine.event_listener" event = "postLoad" method="postLoad"/>
        </service>


        <!-- service locale listener -->
        <service id="bl.locale.listener" class="AppBundle\Listener\LocaleListener">
            <argument>%kernel.default_locale%</argument>
            <tag name="kernel.event_subscriber"/>
        </service>


        <service id="bl.settings.listener.resolver" class="AppBundle\Listener\MyEntityListenerResolver">
            <argument type="service" id="service_container" />
        </service>

        <!-- NewsFeed service -->
        <service id="bl_news_feed_service" class="AppBundle\Services\NewsFeedService">
            <argument type="service" id="service_container" />
        </service>

        <!--  form for languages -->
        <service id="app.form.lng" class="AppBundle\Form\Type\LngType">
            <tag name="form.type" alias="lng" />
            <argument type="service" id="service_container" />
        </service>

        <!-- custom liip filter-->
        <service id="app.filter.central_crop" class="AppBundle\LiipFilters\CentralCropFilterLoader">
            <tag name="liip_imagine.filter.loader" loader="central_crop" />
        </service>

    </services>

</container>
